*************************
Site Specific Information
*************************

--------------------
Virtual environments
--------------------

The virtual environments for PGD on zeus are located under the PGD user's home directory.

    * pgd-staging: /home/pgd/.virtualenvs/pgd-staging/
    * pgd-prod: /var/lib/django/pgd-prod/pgd (will move to /home/pgd/.virtualenvs/pgd-prod/ ASAP)

In addition to the traditional contents of a virtual environment as directed by the requirements file, the bin directory in the virtual environment also contains the binary::

    dsspcmbi

which is used by ProcessPDBTask.py to import data into the database.

-----------------------------------------
Files generated during the update process
-----------------------------------------

Text files pertaining to previous updates (selection files, reports, crosschecks, etc.) should be moved to the following directory after the update is complete::

    /home/pgd/update-records

These files should follow a naming format like this before moving::

    20131231-selection.txt

Compressed SQL files generated by the update tool should be renamed in the same manner after the update is complete, but they are too large to be moved at this time.

------------------------------------------
Differences between staging and production
------------------------------------------

The staging directory has two directories which are not found in the production directory. These directories hold the files downloaded from the WWPDB and CMBI which are imported into the staging database. Their names are::

    pdb
    dssp


They may move, possibly to the home directory, at a later date.

The production directory has a number of files which are not present in the staging directory and are also not in source control.

    * Historical copies of the staging and production databases for the pgd_core app.
    * There are large compressed SQL files which represent the state of the staging and production databases for the pgd_core app in the production directory. These are used during the update process, and can be used for post-update analysis. Any files of this type older than one year can be deleted.
    * lib64
    * It is not clear to me what this directory is for -- it may be part of the virtualenv.
    * searchConvert.py
    * This file was used to convert certain data structures from version 0.9.2 to 0.9.3 and can probably be deleted.
    * static/pdf/2011_tronrud-shelxl.pdf
    * This is a local copy of the paper which is cited as a source when referencing PGD in publications. There are five other papers in that directory which are in the repository, so this one should probably be added.
    * update-from-staging.sh
    * This script is executed to update the production database from the staging database.

In addition to these differences, the settings.py for staging and production is different with regard to database configuration and version settings.
